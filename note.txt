最後揭示買賣量即為交易結束後未成交的買／賣量
假使最後揭示買量遠大於最後揭示賣量，通常代表想買的人買不太到，但想賣的人大多已賣出去了，代表該檔股票買氣旺盛。
last_best_ask_volume最後揭示賣量
last_best_bid_volume最後揭示買量

-- Bband
(1)上線：
中線加上兩倍標準差（計算期內各天股價）所繪製出的線，又稱為「壓力線」。
(2)中線：20日移動平均線
在一般情況下，布林通道中的中線常以20日移動平均線為主，不過若投資人想搭配不同計算期的均線來進行分析也是可以的。
(3)下線
中線減去兩倍標準差（計算期內各天股價）所繪製的線，又稱為「支撐線」。
(4)布林通道
上線（壓力線）與下線（支撐線）中間的範圍，即是布林通道。

%B = (收盤價−支撐線值) ÷ (壓力線−支撐線值)
%B > 80 : 多頭行情
%B < 20 : 空頭行情
%B值並沒有絕對的上下限，當收盤價超越上線時，%B會超過100%
當股價低於支撐線時，%B則會出現負值的情況。

由於布林通道的上下線為移動平均線加減兩個標準差所形成的範圍，因此當計算期內的股價波動大，
布林通道的範圍就會比較寬廣（標準差較大），
反之，當股價波動較小、趨於穩定的態勢，布林通道的範圍就會變得狹窄（標準差較小）。
帶寬指標值 = (壓力線值−支撐線值) ÷中線值

-- KD
KD市場常使用的一套技術分析工具。其適用範圍以中短期投資的技術分析為最佳。隨機 指標的理論認為：當股市處於牛市時，收盤價往往接近當日最高價
；反之在熊市時，收盤價比較接近當日最低價，該指數的目的即在反映 出近期收盤價在該段日子中價格區間的相對位置。
KD指標是使用RSV的加權移動平均來計算的，RSV數據表達的是「與最近9天相比，今天的股價是強還是弱?」。
而KD數值越高代表個股的收盤價接近最近幾天的最高價，反之KD數值越低代表個股的收盤價接近最近幾天的最低價。
使用方法	
1.如果行情是一個明顯的漲勢，會帶動K線與D線向上升。如漲勢開始遲緩，則會反應到K值與D值，使得K值跌破D值，此時中短期跌勢確立。
2.當K值大於D值，顯示目前是向上漲升的趨勢，因此在圖形上K線向上突破D線時，即為買進訊號。
3.當D值大於K值，顯示目前是向下跌落，因此在圖形上K 線向下跌破D線，此即為賣出訊號。
4.上述K線與D線的交叉，須在80以上，20以下(一說70、30；視市場投機程度而彈性擴大範圍)，訊號才正確。
5.當K值大於80，D值大於70時，表示當日收盤價處於偏高之價格區域，即為超買狀態；當K值小於20，D值小於30時，表示當日收盤價處於偏低之價格區域，即為超賣狀態。
6.當D值跌至15以下時，意味市場為嚴重之超賣，其為買入訊號；當D值超過85以上時，意味市場為嚴重之超買，其為賣出訊號。
7.價格創新高或新低，而KD未有此現象，此為背離現象，亦即為可能反轉的重要前兆。


RSV計算方式：
(今日收盤價 - 最近九天曾經出現過的最低價)/(最近九天曾經出現過的最高價 - 最近九天曾經出現過最低價)

K值 是RSV 和前一日的 K的加權平均
K = 2/3 * (昨日K值) + 1/3 * (今日RSV)

D值 是K 和前一日的 D 的加權平均
D = 2/3 * (昨日D值) + 1/3 * (今日K值)





--
select security_code ,data_dt
from daily_quotes
group by security_code ,data_dt
having count(*) >= 2

